recalculate

на выходе diffFiles
если failedFiles не пустой,
тогда diffFiles+=failedFiles

diffFiles пустой failedFiles не пустой
 -> event = FAIL
 -> diffFiles=failedFiles
 -> save diffFiles eventId ^

diffFiles не пустой failedFiles пустой
 -> check diffFiles is OK ?
 yes -> event = PASS
     -> update fileSet
 no -> event = FAIL
    -> update fileSet
    -> save diffFiles eventId ^

diffFiles не пустой failedFiles не пустой
event = FAIL
-> check diffFiles is OK ?
yes -> update fileSet
    -> diffFiles=failedFiles
    -> save diffFiles eventId ^

badFiles(error && changed)
